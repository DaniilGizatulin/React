{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Daniil/FicusTest/my-app/src/components/editor-posts/editor-posts.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router';\nimport { loaded } from '../../actions';\nimport WithServer from '../hoc';\nimport { Modal, Button } from 'react-bootstrap';\nimport Spinner from '../spinner';\nimport './editor-posts.sass';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditorPosts = ({\n  Server\n}) => {\n  _s();\n\n  //useSelector\n  const loading = useSelector(state => state.loading); //useParams\n\n  const {\n    id\n  } = useParams(); //useDispatch\n\n  const dispatch = useDispatch(); //useHistory\n\n  const history = useHistory(); //useState\n\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [fullText, setFullText] = useState('');\n  const [message, setMessage] = useState('');\n  const [post, setPost] = useState(null); //ref\n\n  const refTitle = useRef();\n  const refDescription = useRef();\n  const refFullText = useRef();\n  const refImagePost = useRef();\n  const refMessage = useRef(); // token \n\n  const token = localStorage.getItem('token');\n\n  const changeField = ref => {\n    ref.current.disabled = '';\n    ref.current.focus();\n  };\n\n  const messageResponse = (ref, message, color) => {\n    ref.current.classList.add(color);\n    setMessage(message);\n    setTimeout(() => setMessage(''), 1500);\n  };\n\n  const changePost = (id, token, title, description, fullText) => {\n    Server.updatePost(id, token, title, description, fullText).then(res => {\n      console.log(res);\n      messageResponse(refMessage, 'Sucсess', 'green');\n    }).catch(e => messageResponse(refMessage, 'Something went wrong', 'red'));\n  };\n\n  const changePostImage = e => {\n    let formData = new FormData();\n    formData.append('image', e.target.files[0]);\n    Server.updatePostImage(id, token, formData).then(res => {\n      messageResponse(refMessage, 'Sucсess', 'green');\n      Server.getPost(id).then(res => Server.getImage(refImagePost, res.data.image));\n    }).catch(e => messageResponse(refMessage, 'Something went wrong', 'red'));\n  };\n\n  const delPost = (id, token) => {\n    const confirmation = window.confirm('Are you sure you want to delete this post?');\n\n    if (confirmation) {\n      Server.deletePost(id, token);\n      setTimeout(() => history.push('/list'), 1000);\n    }\n  }; //? Modal \n\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const modal = /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: handleClose,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        children: \"Delete post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: \"Are you sure you want to delete this post? \\uD83E\\uDDD0 \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: handleClose,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: handleClose,\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this); //? Modal\n\n\n  useEffect(() => {\n    Server.getPost(id).then(res => {\n      dispatch(loaded());\n      setPost(res.data);\n      Server.getImage(refImagePost, res.data.image, '', res.data.description);\n    }).catch(res => setPost(null));\n  }, [Server, dispatch, id]);\n\n  if (loading || !post) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editor\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-post\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-item-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"menu-post delete\",\n              onClick: () => {\n                //delPost(id, token)\n                handleShow();\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-trash-o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 30\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-post\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"header-post \",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  title: \"Title your post\",\n                  className: \"title editor-title\",\n                  placeholder: post.title,\n                  disabled: \"disabled\",\n                  onBlur: e => e.target.disabled = 'disabled',\n                  ref: refTitle,\n                  value: title,\n                  onChange: e => setTitle(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-update-post\",\n                  onClick: () => changeField(refTitle),\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"16\",\n                    height: \"16\",\n                    fill: \"currentColor\",\n                    className: \"bi bi-pen-fill\",\n                    viewBox: \"0 0 16 16\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"editor-description\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  title: \"Description your post\",\n                  type: \"text\",\n                  className: \" editor-description\",\n                  placeholder: post.description,\n                  disabled: \"disabled\",\n                  onBlur: e => e.target.disabled = 'disabled',\n                  ref: refDescription,\n                  value: description,\n                  onChange: e => setDescription(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-update-post\",\n                  onClick: () => changeField(refDescription),\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"16\",\n                    height: \"16\",\n                    fill: \"currentColor\",\n                    className: \"bi bi-pen-fill\",\n                    viewBox: \"0 0 16 16\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"editor-image\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"\",\n                  alt: \"post_image\",\n                  className: \"post-image\",\n                  ref: refImagePost\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"file-upload\",\n                  className: \"inp-upload\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-camera\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    id: \"file-upload\",\n                    onChange: e => changePostImage(e)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"editor-full-text\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  title: \"Full text your post\",\n                  className: \"form-control editor-full-text\",\n                  rows: \"2\",\n                  placeholder: post.fullText,\n                  disabled: \"disabled\",\n                  onBlur: e => e.target.disabled = 'disabled',\n                  ref: refFullText,\n                  value: fullText,\n                  onChange: e => setFullText(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-update-post\",\n                  onClick: () => changeField(refFullText),\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"16\",\n                    height: \"16\",\n                    fill: \"currentColor\",\n                    className: \"bi bi-pen-fill\",\n                    viewBox: \"0 0 16 16\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message\",\n                ref: refMessage,\n                children: message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary save\",\n                onClick: () => changePost(id, token, title, description, fullText),\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), modal]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditorPosts, \"stD7FnliH+56/M2RwV8SZGpYv6M=\", false, function () {\n  return [useSelector, useParams, useDispatch, useHistory];\n});\n\n_c = EditorPosts;\nexport default WithServer()(EditorPosts);\n\nvar _c;\n\n$RefreshReg$(_c, \"EditorPosts\");","map":{"version":3,"sources":["/home/ubuntu/Рабочий стол/Daniil/FicusTest/my-app/src/components/editor-posts/editor-posts.js"],"names":["React","useEffect","useRef","useState","useDispatch","useSelector","useHistory","useParams","loaded","WithServer","Modal","Button","Spinner","EditorPosts","Server","loading","state","id","dispatch","history","title","setTitle","description","setDescription","fullText","setFullText","message","setMessage","post","setPost","refTitle","refDescription","refFullText","refImagePost","refMessage","token","localStorage","getItem","changeField","ref","current","disabled","focus","messageResponse","color","classList","add","setTimeout","changePost","updatePost","then","res","console","log","catch","e","changePostImage","formData","FormData","append","target","files","updatePostImage","getPost","getImage","data","image","delPost","confirmation","window","confirm","deletePost","push","show","setShow","handleClose","handleShow","modal","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router';\nimport { loaded } from '../../actions';\nimport WithServer from '../hoc';\nimport { Modal, Button } from 'react-bootstrap';\n\nimport Spinner from '../spinner';\nimport './editor-posts.sass';\n\nconst EditorPosts = ({ Server }) => {\n    //useSelector\n    const loading = useSelector(state => state.loading)\n\n    //useParams\n    const { id } = useParams()\n\n    //useDispatch\n    const dispatch = useDispatch();\n\n    //useHistory\n    const history = useHistory()\n\n    //useState\n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [fullText, setFullText] = useState('')\n    const [message, setMessage] = useState('')\n    const [post, setPost] = useState(null)\n\n    //ref\n    const refTitle = useRef()\n    const refDescription = useRef()\n    const refFullText = useRef()\n    const refImagePost = useRef()\n    const refMessage = useRef()\n\n    // token \n    const token = localStorage.getItem('token')\n\n    const changeField = (ref) => {\n        ref.current.disabled = '';\n        ref.current.focus()\n    }\n\n    const messageResponse = (ref, message, color) => {\n        ref.current.classList.add(color)\n        setMessage(message)\n        setTimeout(() => setMessage(''), 1500)\n    }\n\n    const changePost = (id, token, title, description, fullText) => {\n        Server.updatePost(id, token, title, description, fullText)\n            .then(res => {\n                console.log(res)\n                messageResponse(refMessage, 'Sucсess', 'green')\n            })\n            .catch(e => messageResponse(refMessage, 'Something went wrong', 'red'))\n    }\n\n    const changePostImage = (e) => {\n        let formData = new FormData()\n        formData.append('image', e.target.files[0])\n        Server.updatePostImage(id, token, formData)\n            .then(res => {\n                messageResponse(refMessage, 'Sucсess', 'green')\n                Server.getPost(id)\n                    .then(res => Server.getImage(refImagePost, res.data.image))\n            })\n            .catch(e => messageResponse(refMessage, 'Something went wrong', 'red'))\n    }\n\n    const delPost = (id, token) => {\n        const confirmation = window.confirm('Are you sure you want to delete this post?')\n        if (confirmation) {\n            Server.deletePost(id, token)\n            setTimeout(() => history.push('/list'), 1000)\n        }\n    }\n\n    //? Modal \n\n    const [show, setShow] = useState(false)\n    const handleClose = () => setShow(false)\n    const handleShow = () => setShow(true)\n\n    const modal =\n        <Modal show={show} onHide={handleClose}>\n            <Modal.Header closeButton>\n                <Modal.Title>Delete post</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>Are you sure you want to delete this post? 🧐 </Modal.Body>\n            <Modal.Footer>\n                <Button variant=\"secondary\" onClick={handleClose}>\n                    Close\n        </Button>\n                <Button variant=\"primary\" onClick={handleClose}>\n                    Save Changes\n        </Button>\n            </Modal.Footer>\n        </Modal>\n\n    //? Modal\n\n    useEffect(() => {\n        Server.getPost(id)\n            .then(res => {\n                dispatch(loaded())\n                setPost(res.data)\n                Server.getImage(refImagePost, res.data.image, '', res.data.description)\n            })\n            .catch(res => setPost(null))\n    }, [Server, dispatch, id])\n\n    if (loading || !post) {\n        return <Spinner />\n    }\n    return (\n        <div className='editor'>\n\n            <div className='editor-body'>\n\n                <div className=\"item\">\n                    <div className=\"item-post\">\n                        <div className=\"post-item-list\">\n                            <button\n                                className='menu-post delete'\n                                onClick={() => {\n                                    //delPost(id, token)\n                                    handleShow()\n                                }}\n                            ><i className=\"fa fa-trash-o\"></i></button>\n                            <div className=\"info-post\">\n                                <div className='header-post '>\n                                    <input type=\"text\"\n                                        title='Title your post'\n                                        className=\"title editor-title\"\n                                        placeholder={post.title}\n                                        disabled='disabled'\n                                        onBlur={(e) => e.target.disabled = 'disabled'}\n                                        ref={refTitle}\n                                        value={title}\n                                        onChange={(e) => setTitle(e.target.value)}\n                                    />\n                                    <button className='btn-update-post' onClick={() => changeField(refTitle)}>\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-pen-fill\" viewBox=\"0 0 16 16\">\n                                            <path d=\"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z\" />\n                                        </svg>\n                                    </button>\n                                </div>\n                                <div className='editor-description'>\n                                    <input\n                                        title='Description your post'\n                                        type=\"text\"\n                                        className=\" editor-description\"\n                                        placeholder={post.description}\n                                        disabled='disabled'\n                                        onBlur={(e) => e.target.disabled = 'disabled'}\n                                        ref={refDescription}\n                                        value={description}\n                                        onChange={(e) => setDescription(e.target.value)}\n                                    />\n                                    <button className='btn-update-post' onClick={() => changeField(refDescription)}>\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-pen-fill\" viewBox=\"0 0 16 16\">\n                                            <path d=\"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z\" />\n                                        </svg>\n                                    </button>\n                                </div>\n                                <div className='editor-image'>\n                                    <img src='' alt='post_image' className=\"post-image\" ref={refImagePost} />\n                                    <label htmlFor='file-upload' className='inp-upload' >\n                                        <i className=\"fa fa-camera\"></i>\n                                        <input\n                                            type='file'\n                                            id=\"file-upload\"\n                                            onChange={(e) => changePostImage(e)}\n                                        />\n                                    </label>\n                                </div>\n                                <div className='editor-full-text'>\n                                    <textarea\n                                        title='Full text your post'\n                                        className=\"form-control editor-full-text\"\n                                        rows=\"2\"\n                                        placeholder={post.fullText}\n                                        disabled='disabled'\n                                        onBlur={(e) => e.target.disabled = 'disabled'}\n                                        ref={refFullText}\n                                        value={fullText}\n                                        onChange={(e) => setFullText(e.target.value)}\n                                    >\n                                    </textarea>\n                                    <button className='btn-update-post' onClick={() => changeField(refFullText)}>\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-pen-fill\" viewBox=\"0 0 16 16\">\n                                            <path d=\"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z\" />\n                                        </svg>\n                                    </button>\n                                </div>\n                                <p className='message' ref={refMessage}>{message}</p>\n                                <button className='btn btn-primary save' onClick={() => changePost(id, token, title, description, fullText)}>Save</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {modal}\n            </div>\n\n        </div>\n    )\n}\n\nexport default WithServer()(EditorPosts);"]},"metadata":{},"sourceType":"module"}