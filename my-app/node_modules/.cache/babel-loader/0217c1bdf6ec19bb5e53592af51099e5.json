{"ast":null,"code":"//import axios from 'axios';\nimport { LOGIN_USER, LOGOUT, LOADED, DELETED, ALL_USERS, POST_USER, AUTH_TOKEN } from './types';\nimport api from '../../services/api';\n\nconst authorizationUser = () => {\n  return dispatch => api.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth/user').then(res => {\n    dispatch({\n      type: LOGIN_USER,\n      payload: res.data\n    });\n    let saveUser = JSON.stringify(res.data);\n    localStorage.setItem('user', saveUser);\n  }).catch(e => console.log(e.response));\n};\n\nfunction loginUser(authorizedForm, setError, nav) {\n  return dispatch => api.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/auth\", { ...authorizedForm\n  }).then(res => {\n    api.defaults.headers['Authorization'] = `Bearer ${res.data.token}`;\n    dispatch({\n      type: AUTH_TOKEN,\n      payload: res.data.token\n    });\n\n    if (nav) {\n      nav(`/list/page${1}/?limit=10&skip=${0}`);\n    }\n\n    localStorage.setItem('token', res.data.token);\n    dispatch(authorizationUser());\n  }).catch(e => {\n    e.response.status === 404 && setError({\n      error: true,\n      message: 'Такого пользователя не существует'\n    });\n\n    if (nav) {\n      nav('/login');\n    }\n  });\n}\n\nconst setUser = user => {\n  return dispatch => dispatch({\n    type: LOGIN_USER,\n    payload: user\n  });\n};\n\nconst logout = history => {\n  return dispatch => {\n    dispatch({\n      type: LOGOUT\n    });\n    dispatch({\n      type: AUTH_TOKEN,\n      payload: null\n    });\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n    history.push(\"/login\");\n  };\n};\n\nconst loaded = () => {\n  return dispatch => dispatch({\n    type: LOADED\n  });\n};\n\nconst deleteUser = (id, history) => {\n  return dispatch => {\n    api.delete(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`).then(res => {\n      dispatch({\n        type: LOGOUT\n      });\n      dispatch({\n        type: DELETED,\n        payload: true\n      });\n      localStorage.removeItem('user');\n      localStorage.removeItem('token');\n      setTimeout(() => {\n        history.push(\"/login\");\n        dispatch({\n          type: DELETED,\n          payload: false\n        });\n      }, 500);\n    });\n  };\n};\n\nconst createNewUser = (registerForm, history) => {\n  return dispatch => api.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/users\", { ...registerForm\n  }).then(res => history.push('/login')).catch(e => {\n    console.log(e.response);\n  });\n};\n\nconst getUserAvatar = (ref, image, defaultImage, alt) => {\n  api.get(`https://nodejs-test-api-blog.herokuapp.com${image}`).then(res => {\n    if (res.statusText === 'OK') {\n      ref.current.src = `https://nodejs-test-api-blog.herokuapp.com${image}`;\n    }\n  }).catch(e => {\n    if (e.status >= 400) {\n      ref.current.src = defaultImage;\n      ref.current.alt = alt;\n    }\n  });\n};\n\nconst getAllUsers = () => {\n  return dispatch => api.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/users').then(res => {\n    dispatch({\n      type: ALL_USERS,\n      payload: res.data\n    });\n    dispatch({\n      type: LOADED\n    });\n  });\n};\n\nconst getPostUser = (id, setError) => {\n  return dispatch => api.get(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`).then(res => {\n    dispatch({\n      type: POST_USER,\n      payload: res.data\n    });\n  }).catch(e => setError(true));\n};\n\nconst updateUserName = (id, name, setName) => {\n  return dispatch => api({\n    method: 'PATCH',\n    url: `https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`,\n    data: {\n      name\n    }\n  }).then(res => {\n    localStorage.setItem('user', JSON.stringify(res.data));\n    dispatch(setUser(res.data));\n    setName('');\n  });\n};\n\nconst updateUserAvatar = (id, avatar, setLoadingImage) => {\n  return dispatch => api.put(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/upload/${id}`, avatar, {\n    headers: {\n      \"Content-Type\": ' multipart/form-data'\n    }\n  }).then(res => {\n    localStorage.setItem('user', JSON.stringify(res.data));\n    dispatch(setUser(res.data));\n    setLoadingImage(false);\n  });\n};\n\nexport { loginUser, setUser, logout, loaded, deleteUser, createNewUser, getUserAvatar, getAllUsers, getPostUser, updateUserName, updateUserAvatar }; //! Если все норм работает , не забыть удалить!\n//const authorizationUser = () => {\n//    try {\n//        const _res = axios.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth/user')\n//        return _res\n//    } catch (e) {\n//        console.log(e.response);\n//    }\n//}\n//function loginUser(email, password, setError, nav) {\n//    return (dispatch) =>\n//        axios.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/auth\", {\n//            email,\n//            password,\n//        })\n//            .then(res => {\n//                axios.defaults.headers['Authorization'] = `Bearer ${res.data.token}`\n//                if (nav) {\n//                    nav(`/list/page${1}/?limit=10&skip=${0}`)\n//                }\n//                localStorage.setItem('token', res.data.token)\n//                if (localStorage.getItem('token')) {\n//                    authorizationUser()\n//                        .then(res => {\n//                            dispatch({ type: LOGIN_USER, payload: res.data })\n//                            let saveUser = JSON.stringify(res.data)\n//                            localStorage.setItem('user', saveUser)\n//                        })\n//                }\n//            })\n//            .catch(e => {\n//                e.response.status === 404\n//                    && setError({ error: true, message: 'Такого пользователя не существует' })\n//                if (nav) {\n//                    nav('/login')\n//                }\n//            })\n//}\n//const setUser = (user) => {\n//    return (dispatch) =>\n//        dispatch({ type: LOGIN_USER, payload: user })\n//}\n//const logout = (history) => {\n//    return (dispatch) => {\n//        dispatch({ type: LOGOUT })\n//        localStorage.removeItem('user');\n//        localStorage.removeItem('token');\n//        history.push(\"/login\");\n//    }\n//}\n//const loaded = () => {\n//    return (dispatch) =>\n//        dispatch({ type: LOADED })\n//}\n//const deleteUser = (id, token, history) => {\n//    return (dispatch) => {\n//        axios.delete(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`)\n//            .then(res => {\n//                dispatch({ type: LOGOUT })\n//                dispatch({ type: DELETED, payload: true })\n//                localStorage.removeItem('user');\n//                localStorage.removeItem('token');\n//                setTimeout(() => {\n//                    history.push(\"/login\")\n//                    dispatch({ type: DELETED, payload: false })\n//                }, 500)\n//            })\n//    }\n//}\n//const createNewUser = (email, password, name, history) => {\n//    return (dispatch) =>\n//        axios.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/users\", {\n//            email,\n//            password,\n//            name\n//        })\n//            .then(res => history.push('/login'))\n//            .catch(e => {\n//                console.log(e.response)\n//            })\n//}\n//const getUserAvatar = (ref, image, defaultImage, alt) => {\n//    axios.get(`https://nodejs-test-api-blog.herokuapp.com${image}`)\n//        .then(res => {\n//            if (res.statusText === 'OK') {\n//                ref.current.src = `https://nodejs-test-api-blog.herokuapp.com${image}`\n//            }\n//        })\n//        .catch(e => {\n//            if (e.status >= 400) {\n//                ref.current.src = defaultImage;\n//                ref.current.alt = alt;\n//            }\n//        })\n//}\n//const getAllUsers = () => {\n//    return (dispatch) =>\n//        axios.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/users')\n//            .then(res => {\n//                dispatch({ type: ALL_USERS, payload: res.data })\n//                dispatch({ type: LOADED })\n//            })\n//}","map":{"version":3,"sources":["/home/ubuntu/Рабочий стол/Daniil/FicusTest/my-app/src/redux/user/actions.js"],"names":["LOGIN_USER","LOGOUT","LOADED","DELETED","ALL_USERS","POST_USER","AUTH_TOKEN","api","authorizationUser","dispatch","get","then","res","type","payload","data","saveUser","JSON","stringify","localStorage","setItem","catch","e","console","log","response","loginUser","authorizedForm","setError","nav","post","defaults","headers","token","status","error","message","setUser","user","logout","history","removeItem","push","loaded","deleteUser","id","delete","setTimeout","createNewUser","registerForm","getUserAvatar","ref","image","defaultImage","alt","statusText","current","src","getAllUsers","getPostUser","updateUserName","name","setName","method","url","updateUserAvatar","avatar","setLoadingImage","put"],"mappings":"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AC4B,OAAO,CAACzB,GAAG,CAACG,IAAL,CAAR,CAAR;AACAoD,IAAAA,eAAe,CAAC,KAAD,CAAf;AACH,GAVL,CADJ;AAYH,CAbD;;AAeA,SAASzC,SAAT,EAAoBW,OAApB,EAA6BE,MAA7B,EAAqCI,MAArC,EAA6CC,UAA7C,EAAyDI,aAAzD,EAAwEE,aAAxE,EAAuFQ,WAAvF,EAAoGC,WAApG,EAAiHC,cAAjH,EAAiIK,gBAAjI,G,CAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA","sourcesContent":["//import axios from 'axios';\nimport { LOGIN_USER, LOGOUT, LOADED, DELETED, ALL_USERS, POST_USER, AUTH_TOKEN } from './types'\n\n\nimport api from '../../services/api';\n\nconst authorizationUser = () => {\n    return (dispatch) =>\n        api.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth/user')\n            .then(res => {\n                dispatch({ type: LOGIN_USER, payload: res.data })\n                let saveUser = JSON.stringify(res.data)\n                localStorage.setItem('user', saveUser)\n            })\n            .catch(e => console.log(e.response))\n\n}\n\nfunction loginUser(authorizedForm, setError, nav) {\n    return (dispatch) =>\n        api.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/auth\", { ...authorizedForm })\n            .then(res => {\n                api.defaults.headers['Authorization'] = `Bearer ${res.data.token}`\n                dispatch({ type: AUTH_TOKEN, payload: res.data.token })\n                if (nav) {\n                    nav(`/list/page${1}/?limit=10&skip=${0}`)\n                }\n                localStorage.setItem('token', res.data.token)\n                dispatch(authorizationUser())\n            })\n            .catch(e => {\n                e.response.status === 404\n                    && setError({ error: true, message: 'Такого пользователя не существует' })\n                if (nav) {\n                    nav('/login')\n                }\n            })\n}\n\nconst setUser = (user) => {\n    return (dispatch) =>\n        dispatch({ type: LOGIN_USER, payload: user })\n}\n\nconst logout = (history) => {\n    return (dispatch) => {\n        dispatch({ type: LOGOUT })\n        dispatch({ type: AUTH_TOKEN, payload: null })\n        localStorage.removeItem('user');\n        localStorage.removeItem('token');\n        history.push(\"/login\");\n    }\n}\n\nconst loaded = () => {\n    return (dispatch) =>\n        dispatch({ type: LOADED })\n}\n\nconst deleteUser = (id, history) => {\n    return (dispatch) => {\n        api.delete(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`)\n            .then(res => {\n                dispatch({ type: LOGOUT })\n                dispatch({ type: DELETED, payload: true })\n                localStorage.removeItem('user');\n                localStorage.removeItem('token');\n                setTimeout(() => {\n                    history.push(\"/login\")\n                    dispatch({ type: DELETED, payload: false })\n                }, 500)\n            })\n    }\n}\n\nconst createNewUser = (registerForm, history) => {\n    return (dispatch) =>\n        api.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/users\", { ...registerForm })\n            .then(res => history.push('/login'))\n            .catch(e => {\n                console.log(e.response)\n            })\n\n}\n\nconst getUserAvatar = (ref, image, defaultImage, alt) => {\n    api.get(`https://nodejs-test-api-blog.herokuapp.com${image}`)\n        .then(res => {\n            if (res.statusText === 'OK') {\n                ref.current.src = `https://nodejs-test-api-blog.herokuapp.com${image}`\n            }\n        })\n        .catch(e => {\n            if (e.status >= 400) {\n                ref.current.src = defaultImage;\n                ref.current.alt = alt;\n            }\n        })\n}\n\nconst getAllUsers = () => {\n    return (dispatch) =>\n        api.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/users')\n            .then(res => {\n                dispatch({ type: ALL_USERS, payload: res.data })\n                dispatch({ type: LOADED })\n            })\n\n\n}\n\nconst getPostUser = (id, setError) => {\n    return (dispatch) =>\n        api.get(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`)\n            .then(res => {\n                dispatch({ type: POST_USER, payload: res.data })\n            })\n            .catch(e => setError(true))\n}\n\nconst updateUserName = (id, name, setName) => {\n    return (dispatch) =>\n        api({\n            method: 'PATCH',\n            url: `https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`,\n            data:\n            {\n                name,\n            },\n        })\n            .then(res => {\n                localStorage.setItem('user', JSON.stringify(res.data))\n                dispatch(setUser(res.data))\n                setName('')\n            })\n}\n\nconst updateUserAvatar = (id, avatar, setLoadingImage) => {\n    return (dispatch) =>\n        api.put(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/upload/${id}`, avatar, {\n            headers: {\n                \"Content-Type\": ' multipart/form-data'\n            }\n        }\n        )\n            .then(res => {\n                localStorage.setItem('user', JSON.stringify(res.data))\n                dispatch(setUser(res.data))\n                setLoadingImage(false)\n            })\n}\n\nexport { loginUser, setUser, logout, loaded, deleteUser, createNewUser, getUserAvatar, getAllUsers, getPostUser, updateUserName, updateUserAvatar }\n\n//! Если все норм работает , не забыть удалить!\n\n//const authorizationUser = () => {\n//    try {\n//        const _res = axios.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth/user')\n//        return _res\n//    } catch (e) {\n//        console.log(e.response);\n//    }\n//}\n\n//function loginUser(email, password, setError, nav) {\n//    return (dispatch) =>\n//        axios.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/auth\", {\n//            email,\n//            password,\n//        })\n//            .then(res => {\n//                axios.defaults.headers['Authorization'] = `Bearer ${res.data.token}`\n//                if (nav) {\n//                    nav(`/list/page${1}/?limit=10&skip=${0}`)\n//                }\n//                localStorage.setItem('token', res.data.token)\n//                if (localStorage.getItem('token')) {\n//                    authorizationUser()\n//                        .then(res => {\n//                            dispatch({ type: LOGIN_USER, payload: res.data })\n//                            let saveUser = JSON.stringify(res.data)\n//                            localStorage.setItem('user', saveUser)\n//                        })\n//                }\n//            })\n//            .catch(e => {\n//                e.response.status === 404\n//                    && setError({ error: true, message: 'Такого пользователя не существует' })\n//                if (nav) {\n//                    nav('/login')\n//                }\n//            })\n//}\n\n//const setUser = (user) => {\n//    return (dispatch) =>\n//        dispatch({ type: LOGIN_USER, payload: user })\n//}\n\n//const logout = (history) => {\n//    return (dispatch) => {\n//        dispatch({ type: LOGOUT })\n//        localStorage.removeItem('user');\n//        localStorage.removeItem('token');\n//        history.push(\"/login\");\n//    }\n//}\n\n//const loaded = () => {\n//    return (dispatch) =>\n//        dispatch({ type: LOADED })\n//}\n\n//const deleteUser = (id, token, history) => {\n//    return (dispatch) => {\n//        axios.delete(`https://nodejs-test-api-blog.herokuapp.com/api/v1/users/${id}`)\n//            .then(res => {\n//                dispatch({ type: LOGOUT })\n//                dispatch({ type: DELETED, payload: true })\n//                localStorage.removeItem('user');\n//                localStorage.removeItem('token');\n//                setTimeout(() => {\n//                    history.push(\"/login\")\n//                    dispatch({ type: DELETED, payload: false })\n//                }, 500)\n//            })\n//    }\n//}\n\n//const createNewUser = (email, password, name, history) => {\n//    return (dispatch) =>\n//        axios.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/users\", {\n//            email,\n//            password,\n//            name\n//        })\n//            .then(res => history.push('/login'))\n//            .catch(e => {\n//                console.log(e.response)\n//            })\n\n//}\n\n//const getUserAvatar = (ref, image, defaultImage, alt) => {\n//    axios.get(`https://nodejs-test-api-blog.herokuapp.com${image}`)\n//        .then(res => {\n//            if (res.statusText === 'OK') {\n//                ref.current.src = `https://nodejs-test-api-blog.herokuapp.com${image}`\n//            }\n//        })\n//        .catch(e => {\n//            if (e.status >= 400) {\n//                ref.current.src = defaultImage;\n//                ref.current.alt = alt;\n//            }\n//        })\n//}\n\n//const getAllUsers = () => {\n//    return (dispatch) =>\n//        axios.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/users')\n//            .then(res => {\n//                dispatch({ type: ALL_USERS, payload: res.data })\n//                dispatch({ type: LOADED })\n//            })\n\n\n//}\n"]},"metadata":{},"sourceType":"module"}