{"ast":null,"code":"import axios from 'axios';\nimport { LOGIN_USER, ERROR } from './types'; //function loginUser(email, password, history) {\n//    return (dispatch) =>\n//        axios\n//            .post('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth', {\n//                email,\n//                password,\n//            })\n//            .then(res => {\n//                localStorage.setItem('token', res.data.token);\n//                dispatch({ type: LOGIN_USER })\n//            },\n//                history.push('/list')\n//            )\n//            .catch(e => console.log(e))\n//}\n\nconst authorizationUser = token => {\n  try {\n    const _res = axios.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth/user', {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n\n    return _res;\n  } catch (e) {\n    console.log(e.response);\n  }\n};\n\nfunction loginUser1(email, password, nav) {\n  return dispatch => axios.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/auth\", {\n    email,\n    password\n  }).then(res => {\n    localStorage.setItem('token', res.data.token);\n\n    if (localStorage.getItem('token')) {\n      authorizationUser(localStorage.getItem('token')).then(res => {\n        dispatch({\n          type: LOGIN_USER,\n          payload: res.data\n        });\n        let saveUser = JSON.stringify(res.data);\n        localStorage.setItem('user', saveUser);\n      });\n    }\n  }).catch(e => {\n    nav('/login');\n    dispatch({\n      type: ERROR\n    });\n  });\n}\n\nexport default loginUser1;","map":{"version":3,"sources":["/home/ubuntu/Рабочий стол/Daniil/FicusTest/my-app/src/redux/auth/actions.js"],"names":["axios","LOGIN_USER","ERROR","authorizationUser","token","_res","get","headers","e","console","log","response","loginUser1","email","password","nav","dispatch","post","then","res","localStorage","setItem","data","getItem","type","payload","saveUser","JSON","stringify","catch"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,KAArB,QAAkC,SAAlC,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,iBAAiB,GAAIC,KAAD,IAAW;AACjC,MAAI;AACA,UAAMC,IAAI,GAAGL,KAAK,CAACM,GAAN,CAAU,6DAAV,EAAyE;AAAEC,MAAAA,OAAO,EAAE;AAAE,yBAAkB,UAASH,KAAM;AAAnC;AAAX,KAAzE,CAAb;;AACA,WAAOC,IAAP;AACH,GAHD,CAGE,OAAOG,CAAP,EAAU;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,QAAd;AACH;AACJ,CAPD;;AASA,SAASC,UAAT,CAAoBC,KAApB,EAA2BC,QAA3B,EAAqCC,GAArC,EAA0C;AACtC,SAAQC,QAAD,IACHhB,KAAK,CAACiB,IAAN,CAAW,wDAAX,EAAqE;AACjEJ,IAAAA,KADiE;AAEjEC,IAAAA;AAFiE,GAArE,EAIKI,IAJL,CAIUC,GAAG,IAAI;AACTC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASlB,KAAvC;;AACA,QAAIgB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AAC/BpB,MAAAA,iBAAiB,CAACiB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAD,CAAjB,CACKL,IADL,CACUC,GAAG,IAAI;AACTH,QAAAA,QAAQ,CAAC;AAAEQ,UAAAA,IAAI,EAAEvB,UAAR;AAAoBwB,UAAAA,OAAO,EAAEN,GAAG,CAACG;AAAjC,SAAD,CAAR;AACA,YAAII,QAAQ,GAAGC,IAAI,CAACC,SAAL,CAAeT,GAAG,CAACG,IAAnB,CAAf;AACAF,QAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BK,QAA7B;AACH,OALL;AAMH;AACJ,GAdL,EAeKG,KAfL,CAeWrB,CAAC,IAAI;AACRO,IAAAA,GAAG,CAAC,QAAD,CAAH;AACAC,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAEtB;AAAR,KAAD,CAAR;AACH,GAlBL,CADJ;AAoBH;;AAID,eAAeU,UAAf","sourcesContent":["import axios from 'axios';\nimport { LOGIN_USER, ERROR } from './types'\n\n//function loginUser(email, password, history) {\n//    return (dispatch) =>\n//        axios\n//            .post('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth', {\n//                email,\n//                password,\n//            })\n//            .then(res => {\n//                localStorage.setItem('token', res.data.token);\n//                dispatch({ type: LOGIN_USER })\n//            },\n//                history.push('/list')\n//            )\n//            .catch(e => console.log(e))\n//}\n\nconst authorizationUser = (token) => {\n    try {\n        const _res = axios.get('https://nodejs-test-api-blog.herokuapp.com/api/v1/auth/user', { headers: { \"Authorization\": `Bearer ${token}` } })\n        return _res\n    } catch (e) {\n        console.log(e.response);\n    }\n}\n\nfunction loginUser1(email, password, nav) {\n    return (dispatch) =>\n        axios.post(\"https://nodejs-test-api-blog.herokuapp.com/api/v1/auth\", {\n            email,\n            password,\n        })\n            .then(res => {\n                localStorage.setItem('token', res.data.token)\n                if (localStorage.getItem('token')) {\n                    authorizationUser(localStorage.getItem('token'))\n                        .then(res => {\n                            dispatch({ type: LOGIN_USER, payload: res.data })\n                            let saveUser = JSON.stringify(res.data)\n                            localStorage.setItem('user', saveUser)\n                        })\n                }\n            })\n            .catch(e => {\n                nav('/login')\n                dispatch({ type: ERROR })\n            })\n}\n\n\n\nexport default loginUser1"]},"metadata":{},"sourceType":"module"}